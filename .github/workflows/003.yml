name: Technodruidic Dimension Boot

on:
  workflow_dispatch:

jobs:
  summon-nature-spirit:
    runs-on: ubuntu-latest
    steps:
      - name: Invoke the Elders of the Repository
        uses: actions/checkout@v4

      - name: Whisper to the Cosmic Forces
        run: echo "üåø The code whispers like wind through the ancient trees... üåø"

      - name: Align with the Celestial Clock
        run: |
          echo "üîÆ The current cosmic timestamp is:"
          date

      - name: Seek Guidance from the Forest Guardians
        run: |
          echo "üçÉ System wisdom revealed:"
          uname -a

      - name: Carve Runes of Success
        run: |
          echo "·õâ ·õÉ ·ö® ·ö† ·õü The spirits of automation have accepted the offering. ·õü ·ö† ·ö® ·õÉ ·õâ"

      - name: Build the Ritual Observatory
        run: |
          mkdir -p public
          cat > public/index.html <<'HTML'
          <!doctype html>
          <html lang="en">
            <head>
              <meta charset="UTF-8" />
              <meta name="viewport" content="width=device-width, initial-scale=1.0" />
              <title>Technodruidic Dimension Boot</title>
              <style>
                :root {
                  --bg: #06080f;
                  --panel: #0e1422;
                  --line: #1f2a44;
                  --text: #d9f7e6;
                  --muted: #8eb2a0;
                  --matrix: #4dff8f;
                  --cyan: #7fd5ff;
                  --violet: #c49bff;
                }
                * { box-sizing: border-box; }
                body {
                  margin: 0;
                  min-height: 100vh;
                  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
                  color: var(--text);
                  background: radial-gradient(circle at 20% -10%, rgba(127,213,255,.15), transparent 30%), linear-gradient(160deg, #04060b, var(--bg));
                  padding: 24px;
                }
                .frame {
                  max-width: 1080px;
                  margin: 0 auto;
                  border: 1px solid var(--line);
                  border-radius: 14px;
                  overflow: hidden;
                  background: rgba(8,12,20,.85);
                  box-shadow: 0 20px 60px rgba(0,0,0,.45);
                }
                .titlebar {
                  padding: 12px 16px;
                  border-bottom: 1px solid var(--line);
                  background: rgba(127,213,255,.08);
                  font-weight: 700;
                }
                .tabs {
                  display: flex;
                  gap: 8px;
                  padding: 10px 12px;
                  border-bottom: 1px solid var(--line);
                  background: rgba(196,155,255,.05);
                }
                .tab-btn {
                  border: 1px solid var(--line);
                  color: var(--text);
                  background: #111a2c;
                  padding: 8px 12px;
                  border-radius: 8px;
                  cursor: pointer;
                }
                .tab-btn.active {
                  border-color: var(--cyan);
                  box-shadow: 0 0 0 1px rgba(127,213,255,.3) inset;
                }
                .panel {
                  display: none;
                  min-height: 540px;
                  position: relative;
                }
                .panel.active { display: block; }

                #matrix-panel { background: #000; }
                #matrix {
                  width: 100%;
                  height: 540px;
                  display: block;
                }

                #ritual-panel {
                  padding: 16px;
                  background: linear-gradient(180deg, rgba(8,12,20,.9), rgba(6,9,16,.95));
                }
                .line { margin: .5rem 0; color: var(--muted); }
                .line .tag { color: var(--cyan); }
                .line .ok { color: var(--matrix); }
                .line .sigil { color: var(--violet); }

                .note {
                  padding: 16px;
                  color: var(--muted);
                  border-top: 1px solid var(--line);
                  font-size: 13px;
                }
              </style>
            </head>
            <body>
              <main class="frame">
                <div class="titlebar">üúÇ technodruidic-dev://dimension-boot</div>
                <nav class="tabs" aria-label="Dimension tabs">
                  <button class="tab-btn active" data-tab="matrix-panel">Matrix Rainfall</button>
                  <button class="tab-btn" data-tab="ritual-panel">Ritual Log</button>
                </nav>

                <section id="matrix-panel" class="panel active" aria-label="Matrix rainfall tab">
                  <canvas id="matrix" width="1080" height="540"></canvas>
                </section>

                <section id="ritual-panel" class="panel" aria-label="Ritual log tab"></section>

                <div class="note">This fictional environment runs as an isolated visual artifact generated by the workflow.</div>
              </main>

              <script>
                const tabs = document.querySelectorAll('.tab-btn');
                const panels = document.querySelectorAll('.panel');
                tabs.forEach((btn) => {
                  btn.addEventListener('click', () => {
                    tabs.forEach((b) => b.classList.remove('active'));
                    panels.forEach((p) => p.classList.remove('active'));
                    btn.classList.add('active');
                    document.getElementById(btn.dataset.tab).classList.add('active');
                  });
                });

                const ritual = [
                  '[boot] Attuning isolated ritual sandbox...',
                  '[check] No foreign realm write-targets detected. ‚úÖ',
                  '[summon] üåø Whispering to the Cosmic Forces',
                  '[time]   üîÆ Synchronizing celestial clock with local timeline',
                  '[scan]   üçÉ Reading kernel wind-song and host runes',
                  '[carve]  ·õâ ·õÉ ·ö® ·ö† ·õü sealing successful pathways ·õü ·ö† ·ö® ·õÉ ·õâ',
                  '[forge]  Constructing fictional full-stack grove: editor, terminal, CI altar',
                  '[spawn]  Opening portal window into their developer dimension',
                  '[watch]  Ritual loop active; the environment sustains itself',
                  '[done]   <the circle is complete, and still running>'
                ];
                const ritualPanel = document.getElementById('ritual-panel');
                ritual.forEach((entry) => {
                  const p = document.createElement('p');
                  p.className = 'line';
                  p.innerHTML = entry
                    .replace(/\[(.*?)\]/g, '<span class="tag">[$1]</span>')
                    .replace('‚úÖ', '<span class="ok">‚úÖ</span>')
                    .replace(/·õâ ·õÉ ·ö® ·ö† ·õü.*?·õü ·ö† ·ö® ·õÉ ·õâ/, '<span class="sigil">$&</span>');
                  ritualPanel.appendChild(p);
                });

                const canvas = document.getElementById('matrix');
                const ctx = canvas.getContext('2d');
                const chars = '01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                const fontSize = 16;
                let columns = Math.floor(canvas.width / fontSize);
                let drops = Array.from({ length: columns }, () => Math.floor(Math.random() * -50));

                function resizeCanvas() {
                  const rect = canvas.getBoundingClientRect();
                  canvas.width = Math.floor(rect.width);
                  canvas.height = Math.floor(rect.height);
                  columns = Math.floor(canvas.width / fontSize);
                  drops = Array.from({ length: columns }, () => Math.floor(Math.random() * -50));
                }

                function drawMatrix() {
                  ctx.fillStyle = 'rgba(0, 0, 0, 0.08)';
                  ctx.fillRect(0, 0, canvas.width, canvas.height);
                  ctx.fillStyle = '#4dff8f';
                  ctx.font = `${fontSize}px monospace`;

                  for (let i = 0; i < drops.length; i++) {
                    const char = chars[Math.floor(Math.random() * chars.length)];
                    const x = i * fontSize;
                    const y = drops[i] * fontSize;
                    ctx.fillText(char, x, y);

                    if (y > canvas.height && Math.random() > 0.975) {
                      drops[i] = 0;
                    }
                    drops[i]++;
                  }
                }

                window.addEventListener('resize', resizeCanvas);
                resizeCanvas();
                setInterval(drawMatrix, 50);
              </script>
            </body>
          </html>
          HTML

      - name: Perform the Ritual of Completion
        run: echo "üåå The circle is complete. The code is strong. üåå"
